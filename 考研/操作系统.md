## 第一章

![image-20210309222500280](D:\notes\images\image-20210309222500280-1616978507261.png)

### 操作系统特性

1. 并发
多个任务的同时执行（微观上还是顺序执行）。并行：一组程序按独立异步的速度执行，无论从微观还是宏观，程序都是一起执行的。
2. 共享
共享是指系统中的资源可以被多个并发进程共同使用。有两种共享方式：互斥共享和同时共享。互斥共享的资源称为临界资源，例如打印机等，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。
3. 虚拟
虚拟技术把一个物理实体转换为多个逻辑实体。主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。
4. 异步
异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。

### 基本功能

1. 进程管理
进程控制、进程同步、进程通信、死锁处理、处理机调度等。
2. 内存管理
内存分配、地址映射、内存保护与共享、虚拟内存等。
3. 文件管理
文件存储空间的管理、目录管理、文件读写管理和保护等。
4. 设备管理
完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率。
主要包括缓冲管理、设备分配、设备处理、虛拟设备等。

### 基本类型

1. 批处理操作系统：不具有交互性，将一批作业交给系统后用户不在干预，系统自动完成。特点是吞吐量高
2. 分时操作系统：采用时间片轮转，使一台计算机同时为多个终端用户使用。
   1. 并行，独占，交互
3. 实时操作系统：指定或者确定的时间内完成系统功能以及对外部或内部事件在同步或异步时间内做出响应的系统
   1. 硬实时：严格按照规定时间内完成任务
   2. 软实时：偶尔违反时间规定

![image-20210310143136504](D:\notes\images\image-20210310143136504.png)

### 中断

在计算机运行期间，出现某些异常需要主机干预时，机器自动停止当前正在运行的程序，处理新情况的程序，处理完成后继续返回断点继续执行之前的程序。

![image-20210310150650693](D:\notes\images\image-20210310150650693.png)

## 第二章

1. 进程：是CPU调度和资源分配的基本单位。
进程控制块 ( PCB) 描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对PCB 的操作
2. 线程是独立调度的基本单位。一个进程中可以有多个线程，它们共享进程资源

![image-20210310160347374](D:\notes\images\image-20210310160347374.png)



### 进程状态：

1. 新建：进程创建，分配资源，初始化pcb
2. 运行：指令在执行
3. 就绪：等待分配处理器
   4. 阻塞：等待事件发生
5. 终止：进程完成，回收系统资源

<img src="D:\notes\images\image-20210310160704904.png" alt="image-20210310160704904" style="zoom:200%;" />

## 进程控制

对系统中所有进程实施有效管理，包括创建，撤销，实现进程状态转换等功能。

![image-20210310194656902](D:\notes\images\image-20210310194656902.png)



## 进程通信

<img src="D:\notes\images\image-20210310195704533.png" alt="image-20210310195704533" style="zoom:200%;" />

## 线程

<img src="D:\notes\images\image-20210310202201768.png" alt="image-20210310202201768" style="zoom:200%;" />

用户级线程：线程管理工作有应用程序完成，用户态下即可完成，对用户不透明，对操作系统透明

内核级线程：线程管理工作由操作系统完成，线程切换必然要在核心态下完成。

<img src="D:\notes\images\image-20210310205045759.png" alt="image-20210310205045759" style="zoom:200%;" />

## 进程的调度算法

先来先服务（FCFS）:此算法的原则是按照作业到达后备作业队列（或进程进入就绪队列）的先后次序选择作业（或进程）

2.短作业优先（SJF:Shortest Process First）：这种算法主要用于作业调度，它从作业后备序列中挑选所需运行时间最短的作业进入主存运行。

3.时间片轮转调度算法：当某个进程执行的时间片用完时，调度程序便终止该进程的执行，并将它送到就绪队列的末尾，等待分配下一时间片再执行。然后把处理机分配给就绪队列中新的队首进程，同时也让它执行一个时间片。这样就可以保证队列中的所有进程，在已给定的时间内，均能获得一时间片处理机执行时间。

4.高响应比优先：按照高响应比（已等待时间+要求运行时间）/要求运行时间 优先的原则，在每次选择作业投入运行时，先计算此时后备作业队列中每个作业的响应比RP。选择最大的作业投入运行。

5.优先权调度算法：按照进程的优先权大小来调度。使高优先权进程得到优先处理的调度策略称为优先权调度算法。注意：优先数越多，优先权越小。

6.多级队列调度算法：多队列调度是根据作业的性质和类型的不同，将就绪队列再分为若干个队列，所有的作业（进程）按其性质排入相应的队列中，而不同的就绪队列采用不同的调度算法。

## 死锁产生条件

1. 一个资源只能同时被一个进程占有
2. 被占有的资源只能被进程主动的释放
3. 一个进程占有了一个资源之后又去申请其他资源
4. 环路等待。

死锁采取策略

1. 鸵鸟策略：忽略该死锁，假装未发生
2. 避免策略：程序运行时避免发生死锁，银行家算法
3. 预防策略：在程序运行之前预防发生死锁
4. 检测与恢复：不阻止死锁的发生，在发生时采取措施恢复。

## 内存管理

<img src="D:\notes\images\image-20210311213950557.png" alt="image-20210311213950557" style="zoom:200%;" />



## 覆盖和交换技术（解决内存不够的问题）

<img src="D:\notes\images\image-20210311215209521.png" alt="image-20210311215209521" style="zoom:200%;" />

## 连续分配管理

![image-20210312205803818](D:\notes\images\image-20210312205803818.png)

## 动态分配管理

1. 首次适应算法：按地址查找第一个能装入它的空闲区。
2. 最佳适应算法：将程序放入所需大小最接近的空闲区中。
3. 最坏适应算法：将程序放入最不适合它的空闲区。

![image-20210312195207281](D:\notes\images\image-20210312195207281.png)

## 分页

页：虚拟地址的一块指定大小的空间

页面：从0开始编号就称为页面

页框：从0开始对应的物理地址

页表：主要实现逻辑地址和物理地址的映射关系

![image-20210315155628748](D:\notes\images\image-20210315155628748.png)

分段：是程序中自然划分的一组逻辑意义完整的信息集合

段页式：程序中的地址空间划分为多个拥有独立地址的段，其中每一段又划分为相同大小的页，既实现了段式的共享和安全，又可以实现虚拟内存的功能

缓冲：为了解决两种设备之间信息传输速度不平衡的方法